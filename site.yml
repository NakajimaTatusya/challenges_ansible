---
  # master playbook
  - hosts: winsvr_staging
#  - hosts: winsvr_production
    gather_facts: true

    pre_tasks:
      - name: 設定前の状態出力(facts)
        debug: 
          var: ansible_facts
      - name: 設定前の状態出力(systeminfo command)
        win_command: systeminfo
        register: _result_info
      - name: display system information
        debug: 
          var: _result_info

      - name: c:\tmp ディレクト作成
        win_file:
          path: c:\tmp\
          state: directory

      - name: Read Server Parameter Main CSV File
        read_csv:
          path: ./csv_files/server_parameter.csv
          key: csv_hosts
        register: _result_server_parameter
        delegate_to: localhost
      - name: Read dns.csv
        read_csv:
          path: ./csv_files/dns.csv
        register: _result_dns
        delegate_to: localhost
      - name: Read wins.csv
        read_csv:
          path: ./csv_files/wins.csv
        register: _result_wins
        delegate_to: localhost

    roles:
      - role: common

    post_tasks:
      - name: 設定完了後の状態出力(facts)
        debug: 
          var: ansible_facts
      - name: 設定完了後の状態出力(systeminfo command)
        win_command: systeminfo
        register: _result_info
      - name: display system information
        debug: 
          var: _result_info
...